<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>FRCR Physics Quiz</title>
    <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet"/>
    <style>
        /* General Body Styles from main portal */
        body {
            font-family: 'Rubik', sans-serif;
            margin: 0;
            overflow-x: hidden;
            background-color: #004d5e; /* Default dark theme */
            color: #ffffff;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Light Theme Variables */
        body.light-theme {
            --bg-color: #e3f2fd;
            --container-bg-color: #ffffff;
            --text-color: #212121;
            --text-muted-color: #6c757d;
            --button-bg-color: #1e88e5;
            --button-hover-bg-color: #1565c0;
            --option-bg-color: #f8f9fa;
            --option-border-color: #dee2e6;
            --correct-bg-color: #d4edda;
            --correct-border-color: #c3e6cb;
            --correct-text-color: #155724;
            --incorrect-bg-color: #f8d7da;
            --incorrect-border-color: #f5c6cb;
            --incorrect-text-color: #721c24;
            --explanation-bg: #e9ecef;
            --radio-dot-bg: #1e88e5;
        }

        /* Dark Theme Variables */
        body:not(.light-theme) {
            --bg-color: #004d5e;
            --container-bg-color: #043f4e;
            --text-color: #ffffff;
            --text-muted-color: #adb5bd;
            --button-bg-color: #00bcd4;
            --button-hover-bg-color: #0097a7;
            --option-bg-color: #095a71;
            --option-border-color: #0a6b83;
            --correct-bg-color: #1a5c34;
            --correct-border-color: #2a9d58;
            --correct-text-color: #e8f5e9;
            --incorrect-bg-color: #6c2b2b;
            --incorrect-border-color: #a04040;
            --incorrect-text-color: #fde0e0;
            --explanation-bg: #002b36;
            --radio-dot-bg: #81d4fa;
        }

        /* Apply theme variables */
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        /* --- Quiz Specific Styles --- */
        .quiz-container {
            max-width: 900px;
            margin: 20px auto;
            padding: 20px;
            background-color: var(--container-bg-color);
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--option-border-color);
        }

        .quiz-header h1 {
            font-size: 1.8rem;
            color: var(--text-color);
            margin: 0;
        }

        .back-link {
            padding: 8px 16px;
            background-color: var(--button-bg-color);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        .back-link:hover {
            background-color: var(--button-hover-bg-color);
        }

        .question-header {
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--text-muted-color);
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            line-height: 1.5;
            margin-bottom: 25px;
        }

        .options-container .option {
            background-color: var(--option-bg-color);
            border: 1px solid var(--option-border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }

        .option-text {
            flex-grow: 1;
            padding-right: 15px;
            line-height: 1.5;
        }
        
        /* --- Custom Radio Button Styles --- */
        .radio-group {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .radio-group label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-color);
        }

        .radio-group input[type="radio"] {
            display: none; /* Hide the default radio button */
        }

        .radio-group label::before {
            content: '';
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid var(--text-muted-color);
            background-color: white;
            margin-right: 10px;
            transition: all 0.2s ease;
        }

        .radio-group input[type="radio"]:checked + label::before {
            border-color: var(--radio-dot-bg);
            background-color: white;
            transform: scale(1.1);
        }
        
        .radio-group input[type="radio"]:checked + label::after {
            content: '';
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: var(--radio-dot-bg);
            left: 6px; /* Position inside the ::before element */
            top: 6px;
            transform: scale(1);
            transition: all 0.2s ease;
        }
        
        .radio-group label {
            position: relative;
            padding-left: 32px; /* Space for custom radio */
        }

        .radio-group input[type="radio"]:checked + label::after {
            left: 4px; /* Adjust positioning based on padding */
            top: 4px;
        }


        /* Styles for after checking answer */
        .option.correct {
            background-color: var(--correct-bg-color);
            border-color: var(--correct-border-color);
            color: var(--correct-text-color);
        }
        .option.incorrect {
            background-color: var(--incorrect-bg-color);
            border-color: var(--incorrect-border-color);
            color: var(--incorrect-text-color);
        }
        .option.correct .radio-group label, .option.incorrect .radio-group label {
            color: var(--correct-text-color);
        }
        body.light-theme .option.incorrect .radio-group label {
            color: var(--incorrect-text-color);
        }


        .explanation {
            display: none; /* Hidden by default */
            margin-top: 25px;
            padding: 20px;
            background-color: var(--explanation-bg);
            border-radius: 8px;
            border: 1px solid var(--option-border-color);
        }
        .explanation h3 {
            margin-top: 0;
            color: var(--text-color);
        }
        .explanation p {
            white-space: pre-wrap; /* Preserve newlines from concatenated explanations */
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }
        
        .quiz-navigation button {
            width: auto;
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: bold;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background-color: var(--button-bg-color);
            color: white;
        }
        .quiz-navigation button:hover {
            background-color: var(--button-hover-bg-color);
        }
        .quiz-navigation button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        #score-display {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .final-score-container, .loading-container, .error-container {
            text-align: center;
            padding: 40px;
        }
        
        .load
